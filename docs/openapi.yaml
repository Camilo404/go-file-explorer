openapi: 3.0.3
info:
  title: Go File Explorer API
  version: 1.0.0
  description: |
    REST API para exploración y gestión de archivos con autenticación JWT, roles y operaciones asíncronas.

    Roles:
    - viewer: lectura
    - editor: lectura + operaciones de escritura
    - admin: todo + auditoría + registro de usuarios
servers:
  - url: http://localhost:8080
    description: Local

tags:
  - name: Health
  - name: Auth
  - name: Users
  - name: Explorer
  - name: Files
  - name: Operations
  - name: Trash
  - name: Search
  - name: Audit
  - name: Jobs
  - name: Storage
  - name: Shares
  - name: Uploads

paths:
  /health:
    $ref: './openapi/paths/health.yaml'

  # Auth
  /api/v1/auth/login:
    $ref: './openapi/paths/auth/login.yaml'
  /api/v1/auth/register:
    $ref: './openapi/paths/auth/register.yaml'
  /api/v1/auth/refresh:
    $ref: './openapi/paths/auth/refresh.yaml'
  /api/v1/auth/logout:
    $ref: './openapi/paths/auth/logout.yaml'
  /api/v1/auth/me:
    $ref: './openapi/paths/auth/me.yaml'
  /api/v1/auth/change-password:
    $ref: './openapi/paths/auth/change-password.yaml'

  # Users
  /api/v1/users:
    $ref: './openapi/paths/users/list.yaml'
  /api/v1/users/{id}:
    $ref: './openapi/paths/users/item.yaml'

  # Files
  /api/v1/files:
    $ref: './openapi/paths/files/list.yaml'
  /api/v1/tree:
    $ref: './openapi/paths/files/tree.yaml'
  /api/v1/directories:
    $ref: './openapi/paths/files/directories.yaml'
  /api/v1/files/upload:
    $ref: './openapi/paths/files/upload.yaml'
  /api/v1/files/download:
    $ref: './openapi/paths/files/download.yaml'
  /api/v1/files/preview:
    $ref: './openapi/paths/files/preview.yaml'
  /api/v1/files/thumbnail:
    $ref: './openapi/paths/files/thumbnail.yaml'
  /api/v1/files/info:
    $ref: './openapi/paths/files/info.yaml'

  # Operations
  /api/v1/files/rename:
    $ref: './openapi/paths/operations/rename.yaml'
  /api/v1/files/move:
    $ref: './openapi/paths/operations/move.yaml'
  /api/v1/files/copy:
    $ref: './openapi/paths/operations/copy.yaml'
  /api/v1/files/restore:
    $ref: './openapi/paths/operations/restore.yaml'
  /api/v1/files/compress:
    $ref: './openapi/paths/operations/compress.yaml'
  /api/v1/files/decompress:
    $ref: './openapi/paths/operations/decompress.yaml'

  # Trash
  /api/v1/trash:
    $ref: './openapi/paths/trash/list.yaml'
  /api/v1/trash/{id}:
    $ref: './openapi/paths/trash/item.yaml'

  # Search
  /api/v1/search:
    $ref: './openapi/paths/search/search.yaml'

  # Audit
  /api/v1/audit:
    $ref: './openapi/paths/audit/list.yaml'

  # Jobs
  /api/v1/jobs/operations:
    $ref: './openapi/paths/jobs/operations.yaml'
  /api/v1/jobs/{job_id}:
    $ref: './openapi/paths/jobs/item.yaml'
  /api/v1/jobs/{job_id}/items:
    $ref: './openapi/paths/jobs/items.yaml'
  /api/v1/jobs/{job_id}/stream:
    $ref: './openapi/paths/jobs/stream.yaml'

  # Storage
  /api/v1/storage/stats:
    $ref: './openapi/paths/storage/stats.yaml'

  # Shares
  /api/v1/shares:
    $ref: './openapi/paths/shares/list.yaml'
  /api/v1/shares/{id}:
    $ref: './openapi/paths/shares/item.yaml'
  /api/v1/public/shares/{token}:
    $ref: './openapi/paths/shares/public.yaml'

  # Chunked Uploads
  /api/v1/uploads/init:
    $ref: './openapi/paths/uploads/init.yaml'
  /api/v1/uploads/{upload_id}/chunks/{chunk_index}:
    $ref: './openapi/paths/uploads/chunk.yaml'
  /api/v1/uploads/{upload_id}/complete:
    $ref: './openapi/paths/uploads/complete.yaml'
  /api/v1/uploads/{upload_id}:
    $ref: './openapi/paths/uploads/item.yaml'

components:
  schemas:
    ChunkedUploadInitRequest:
      $ref: './openapi/components/schemas.yaml#/ChunkedUploadInitRequest'
    ChunkedUploadInitResponse:
      $ref: './openapi/components/schemas.yaml#/ChunkedUploadInitResponse'
    ChunkedUploadChunkResponse:
      $ref: './openapi/components/schemas.yaml#/ChunkedUploadChunkResponse'
    ChunkedUploadCompleteResponse:
      $ref: './openapi/components/schemas.yaml#/ChunkedUploadCompleteResponse'
    CompressRequest:
      $ref: './openapi/components/schemas.yaml#/CompressRequest'
    CompressResponse:
      $ref: './openapi/components/schemas.yaml#/CompressResponse'
    DecompressRequest:
      $ref: './openapi/components/schemas.yaml#/DecompressRequest'
    DecompressResponse:
      $ref: './openapi/components/schemas.yaml#/DecompressResponse'
    APIError:
      $ref: './openapi/components/schemas.yaml#/APIError'
    Meta:
      $ref: './openapi/components/schemas.yaml#/Meta'
    ErrorEnvelope:
      $ref: './openapi/components/schemas.yaml#/ErrorEnvelope'
    AuthUser:
      $ref: './openapi/components/schemas.yaml#/AuthUser'
    TokenPair:
      $ref: './openapi/components/schemas.yaml#/TokenPair'
    TokenPairResponse:
      $ref: './openapi/components/schemas.yaml#/TokenPairResponse'
    AuthUserResponse:
      $ref: './openapi/components/schemas.yaml#/AuthUserResponse'
    BooleanActionResponse:
      $ref: './openapi/components/schemas.yaml#/BooleanActionResponse'
    LoginRequest:
      $ref: './openapi/components/schemas.yaml#/LoginRequest'
    RegisterRequest:
      $ref: './openapi/components/schemas.yaml#/RegisterRequest'
    RefreshRequest:
      $ref: './openapi/components/schemas.yaml#/RefreshRequest'
    FileItem:
      $ref: './openapi/components/schemas.yaml#/FileItem'
    DirectoryListData:
      $ref: './openapi/components/schemas.yaml#/DirectoryListData'
    DirectoryListResponse:
      $ref: './openapi/components/schemas.yaml#/DirectoryListResponse'
    TreeNode:
      $ref: './openapi/components/schemas.yaml#/TreeNode'
    TreeData:
      $ref: './openapi/components/schemas.yaml#/TreeData'
    TreeResponse:
      $ref: './openapi/components/schemas.yaml#/TreeResponse'
    CreateDirectoryRequest:
      $ref: './openapi/components/schemas.yaml#/CreateDirectoryRequest'
    DirectoryCreateData:
      $ref: './openapi/components/schemas.yaml#/DirectoryCreateData'
    DirectoryCreateResponse:
      $ref: './openapi/components/schemas.yaml#/DirectoryCreateResponse'
    UploadItem:
      $ref: './openapi/components/schemas.yaml#/UploadItem'
    UploadFailure:
      $ref: './openapi/components/schemas.yaml#/UploadFailure'
    UploadResponseData:
      $ref: './openapi/components/schemas.yaml#/UploadResponseData'
    UploadResponseEnvelope:
      $ref: './openapi/components/schemas.yaml#/UploadResponseEnvelope'
    RenameRequest:
      $ref: './openapi/components/schemas.yaml#/RenameRequest'
    RenameResponse:
      $ref: './openapi/components/schemas.yaml#/RenameResponse'
    RenameResponseEnvelope:
      $ref: './openapi/components/schemas.yaml#/RenameResponseEnvelope'
    MoveRequest:
      $ref: './openapi/components/schemas.yaml#/MoveRequest'
    MoveCopyResult:
      $ref: './openapi/components/schemas.yaml#/MoveCopyResult'
    MoveCopyFailure:
      $ref: './openapi/components/schemas.yaml#/MoveCopyFailure'
    MoveResponseData:
      $ref: './openapi/components/schemas.yaml#/MoveResponseData'
    MoveResponseEnvelope:
      $ref: './openapi/components/schemas.yaml#/MoveResponseEnvelope'
    CopyResponseData:
      $ref: './openapi/components/schemas.yaml#/CopyResponseData'
    CopyResponseEnvelope:
      $ref: './openapi/components/schemas.yaml#/CopyResponseEnvelope'
    DeleteRequest:
      $ref: './openapi/components/schemas.yaml#/DeleteRequest'
    DeleteFailure:
      $ref: './openapi/components/schemas.yaml#/DeleteFailure'
    DeleteResponseData:
      $ref: './openapi/components/schemas.yaml#/DeleteResponseData'
    DeleteResponseEnvelope:
      $ref: './openapi/components/schemas.yaml#/DeleteResponseEnvelope'
    RestoreRequest:
      $ref: './openapi/components/schemas.yaml#/RestoreRequest'
    RestoreFailure:
      $ref: './openapi/components/schemas.yaml#/RestoreFailure'
    RestoreResponseData:
      $ref: './openapi/components/schemas.yaml#/RestoreResponseData'
    RestoreResponseEnvelope:
      $ref: './openapi/components/schemas.yaml#/RestoreResponseEnvelope'
    SearchData:
      $ref: './openapi/components/schemas.yaml#/SearchData'
    SearchResponse:
      $ref: './openapi/components/schemas.yaml#/SearchResponse'
    AuditActor:
      $ref: './openapi/components/schemas.yaml#/AuditActor'
    AuditEntry:
      $ref: './openapi/components/schemas.yaml#/AuditEntry'
    AuditData:
      $ref: './openapi/components/schemas.yaml#/AuditData'
    AuditResponse:
      $ref: './openapi/components/schemas.yaml#/AuditResponse'
    JobOperationRequest:
      $ref: './openapi/components/schemas.yaml#/JobOperationRequest'
    JobItemResult:
      $ref: './openapi/components/schemas.yaml#/JobItemResult'
    JobData:
      $ref: './openapi/components/schemas.yaml#/JobData'
    JobResponse:
      $ref: './openapi/components/schemas.yaml#/JobResponse'
    JobItemsData:
      $ref: './openapi/components/schemas.yaml#/JobItemsData'
    JobItemsResponse:
      $ref: './openapi/components/schemas.yaml#/JobItemsResponse'
    ChangePasswordRequest:
      $ref: './openapi/components/schemas.yaml#/ChangePasswordRequest'
    UpdateUserRequest:
      $ref: './openapi/components/schemas.yaml#/UpdateUserRequest'
    UserListData:
      $ref: './openapi/components/schemas.yaml#/UserListData'
    UserListResponse:
      $ref: './openapi/components/schemas.yaml#/UserListResponse'
    DeletedActionResponse:
      $ref: './openapi/components/schemas.yaml#/DeletedActionResponse'
    EmptyTrashData:
      $ref: './openapi/components/schemas.yaml#/EmptyTrashData'
    EmptyTrashResponse:
      $ref: './openapi/components/schemas.yaml#/EmptyTrashResponse'
    TrashRecord:
      $ref: './openapi/components/schemas.yaml#/TrashRecord'
    TrashListResponse:
      $ref: './openapi/components/schemas.yaml#/TrashListResponse'
    StorageStats:
      $ref: './openapi/components/schemas.yaml#/StorageStats'
    StorageStatsResponse:
      $ref: './openapi/components/schemas.yaml#/StorageStatsResponse'
    JobUpdate:
      $ref: './openapi/components/schemas.yaml#/JobUpdate'
    CreateShareRequest:
      $ref: './openapi/components/schemas.yaml#/CreateShareRequest'
    ShareRecord:
      $ref: './openapi/components/schemas.yaml#/ShareRecord'
    ShareRecordResponse:
      $ref: './openapi/components/schemas.yaml#/ShareRecordResponse'
    ShareListData:
      $ref: './openapi/components/schemas.yaml#/ShareListData'
    ShareListResponse:
      $ref: './openapi/components/schemas.yaml#/ShareListResponse'
    RevokedActionResponse:
      $ref: './openapi/components/schemas.yaml#/RevokedActionResponse'

  responses:
    BadRequestError:
      $ref: './openapi/components/responses.yaml#/BadRequestError'
    UnauthorizedError:
      $ref: './openapi/components/responses.yaml#/UnauthorizedError'
    ForbiddenError:
      $ref: './openapi/components/responses.yaml#/ForbiddenError'
    NotFoundError:
      $ref: './openapi/components/responses.yaml#/NotFoundError'
    AlreadyExistsError:
      $ref: './openapi/components/responses.yaml#/AlreadyExistsError'
    PayloadTooLargeError:
      $ref: './openapi/components/responses.yaml#/PayloadTooLargeError'
    UnsupportedTypeError:
      $ref: './openapi/components/responses.yaml#/UnsupportedTypeError'

  securitySchemes:
    BearerAuth:
      $ref: './openapi/components/securitySchemes.yaml#/BearerAuth'

  examples:
    BadRequest:
      $ref: './openapi/components/examples.yaml#/BadRequest'
    Unauthorized:
      $ref: './openapi/components/examples.yaml#/Unauthorized'
    Forbidden:
      $ref: './openapi/components/examples.yaml#/Forbidden'
    NotFound:
      $ref: './openapi/components/examples.yaml#/NotFound'
    AlreadyExists:
      $ref: './openapi/components/examples.yaml#/AlreadyExists'
    PayloadTooLarge:
      $ref: './openapi/components/examples.yaml#/PayloadTooLarge'
    UnsupportedType:
      $ref: './openapi/components/examples.yaml#/UnsupportedType'
    RateLimited:
      $ref: './openapi/components/examples.yaml#/RateLimited'
